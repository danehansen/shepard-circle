(this["webpackJsonpshepard-circle"]=this["webpackJsonpshepard-circle"]||[]).push([[0],{12:function(t,e,n){},2:function(t,e,n){t.exports={root:"App_root__nWMuC",holder:"App_holder__33-ly",holdee:"App_holdee__1nrU0",touchPad:"App_touchPad__LkGTv",label:"App_label__1QbUI",toggle:"App_toggle__IuLcT"}},20:function(t,e,n){},22:function(t,e,n){"use strict";n.r(e);var i=n(1),o=n.n(i),a=n(11),c=n.n(a),l=(n(20),n(4)),r=n(9),s=n(2),h=n.n(s),d=n(5),u=n(6),f=n(15),v=n(14),_=n(12),g=n.n(_),x=n(3),p=n.n(x);function b(t,e,n,i,o){var a=Math.cos(t),c=Math.sin(t),l=e-a*e-c*-n,r=n-c*e-a*n;o.call(i,a,c,-c,a,l,r)}var m=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.createElement("canvas"),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.offsetWidth,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.offsetHeight,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window.devicePixelRatio;Object(d.a)(this,t),this.resize=function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.devicePixelRatio;if(!t||!n){var o=!!e._element.parentNode;t=o?e._element.offsetWidth:e._width,n=o?e._element.offsetHeight:e._height}e._devicePixelRatio=i,e._width=t,e._height=n,e._element.width=t*e._devicePixelRatio,e._element.height=n*e._devicePixelRatio,e._imageDataHandler=null,e._context.scale(e._devicePixelRatio,e._devicePixelRatio)},this.arc=function(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,c=arguments.length>5&&void 0!==arguments[5]&&arguments[5];e._context.arc(t,n,i,o,a,c)},this.beginPath=function(){e._context.beginPath()},this.bezierCurveTo=function(){var t;(t=e._context).bezierCurveTo.apply(t,arguments)},this.clearRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.width,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.height;e._context.clearRect(t,n,i,o),e._imageDataHandler=null},this.clip=function(){var t;(t=e._context).clip.apply(t,arguments)},this.closePath=function(){e._context.closePath()},this.drawImage=function(n,i,o,a,c,l,r,s,h){var d=n instanceof t;"number"===typeof l?d?(i*=e._devicePixelRatio,o*=e._devicePixelRatio,a*=e._devicePixelRatio,c*=e._devicePixelRatio,e._context.drawImage(n.element,i,o,a,c,l,r,s,h)):e._context.drawImage(n,i,o,a,c,l,r,s,h):d?(a=a||n.width,c=c||n.height,e._drawImageDest(n.element,i,o,a,c)):e._drawImageDest(n,i,o,a,c),e._imageDataHandler=null},this._drawImageDest=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.width,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t.height;e._context.drawImage(t,n,i,o,a)},this.fill=function(){var t;(t=e._context).fill.apply(t,arguments),e._imageDataHandler=null},this.fillRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.width,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.height;e._context.fillRect(t,n,i,o),e._imageDataHandler=null},this.lineTo=function(){var t;(t=e._context).lineTo.apply(t,arguments)},this.moveTo=function(){var t;(t=e._context).moveTo.apply(t,arguments)},this.quadraticCurveTo=function(){var t;(t=e._context).quadraticCurveTo.apply(t,arguments)},this.rect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.width,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.height;e._context.rect(t,n,i,o)},this.stroke=function(){var t;(t=e._context).stroke.apply(t,arguments),e._imageDataHandler=null},this.resetTransform=function(){e._context.resetTransform(),e._context.scale(e._devicePixelRatio,e._devicePixelRatio)},this.restore=function(){e._context.restore()},this.rotate=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5*e.width,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5*e.height;t&&b(t,n,i,e._context,e._context.transform)},this.save=function(){e._context.save()},this.setRotate=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5*e.width,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5*e.height;b(t,n,i,e._context,e.setTransform)},this.setTransform=function(t,n,i,o,a,c){t*=e._devicePixelRatio,n*=e._devicePixelRatio,i*=e._devicePixelRatio,o*=e._devicePixelRatio,a*=e._devicePixelRatio,c*=e._devicePixelRatio,e._context.setTransform(t,n,i,o,a,c)},this.setTranslate=function(t,n){e.setTransform(1,0,0,1,t,n)},this.translate=function(t,n){e._context.translate(t,n)},this.createImageData=function(t,n){return e._context.createImageData(t,n)},this._element=n,this._context=this._element.getContext("2d"),this.resize(i,o,a)}return Object(u.a)(t,[{key:"element",get:function(){return this._element}},{key:"height",get:function(){return this._height}},{key:"imageDataHandler",get:function(){if(!this._imageDataHandler)this._width,this._devicePixelRatio,this._height,this._devicePixelRatio;return this._imageDataHandler}},{key:"width",get:function(){return this._width}},{key:"fillStyle",set:function(t){this._context.fillStyle=t}},{key:"globalCompositeOperation",set:function(t){this._context.globalCompositeOperation=t}},{key:"globalAlpha",set:function(t){this._context.globalAlpha=t}},{key:"lineWidth",set:function(t){this._context.lineWidth=t}},{key:"strokeStyle",set:function(t){this._context.strokeStyle=t}}],[{key:"quadraticThrough",value:function(t){for(var e,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Path2D,o=t.length,a=0;a<o-1;a++)if(e=n||t[0],n=t[a+1],0===a)i.moveTo(e.x,e.y);else if(a<o-2){var c=(e.x+n.x)/2,l=(e.y+n.y)/2;i.quadraticCurveTo(e.x,e.y,c,l)}else i.quadraticCurveTo(e.x,e.y,n.x,n.y);return i}}]),t}(),y=[],w=[];function T(t){var e,n=440/Math.pow(2,4),i=new(window.AudioContext||window.webkitAudioContext);try{e=i.createGain()}catch(s){console.log("ERROR: shepardTone.initializeContext gainNode = audioCtx.createGain()"),console.log(s),console.log({index:t,audioCtx:i})}var o=Math.pow(2,1/12),a=[];e.connect(i.destination),e.gain.value=1/12;for(var c=n;c<=2e4;c*=2){var l=c*Math.pow(o,t);if(!(l<20)){if(l>2e4)break;var r=i.createOscillator();r.frequency.value=l,r.connect(e),r.start(0),a[c]=r}}try{i.suspend()}catch(s){console.log("ERROR: shepardTone.initializeContext audioCtx.suspend()"),console.log(s),console.log({index:t,audioCtx:i,gainNode:e})}w[t]=i}function j(t,e){var n;e&&!y[t]?(y[n=t]=!0,w[n]?w[n].resume():T(n)):!e&&y[t]&&function(t){try{w[t].suspend()}catch(e){console.log("ERROR: shepardTone.stopNote AUDIO_CONTEXTS[index].suspend()"),console.log(e),console.log({index:t,"AUDIO_CONTEXTS[index]":w[t]})}y[t]=!1}(t)}for(var O=["A","A#/Bb","B","C","C#/Db","D","D#/Eb","E","F","F#/Gb","G","G#/Ab"],R=O.map((function(t,e){return{label:t,index:e,play:j.bind(null,e,!0),pause:j.bind(null,e,!1)}})),k=[];k.length<O.length;)k.push(R[(7*k.length+6)%O.length]);var P=n(0),C=["#f00","#f80","#ff0","#8f0","#0f0","#0f8","#0ff","#08f","#00f","#80f","#f0f","#f08"],N=function(t){Object(f.a)(n,t);var e=Object(v.a)(n);function n(t){var i;return Object(d.a)(this,n),(i=e.call(this,t)).state={},i._rootNode=o.a.createRef(),i}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this._rootNode.current,e=t.offsetWidth,n=t.offsetHeight;this._root=new m(t),this._root.globalCompositeOperation="copy",this._buffer=new m(void 0,e,n),this._background=new m(void 0,e,n),this._drawBackground(),this._root.drawImage(this._background)}},{key:"componentDidUpdate",value:function(t,e){t.isChromatic!==this.props.isChromatic&&(this._drawBackground(),this._root.drawImage(this._background)),t.activeNotes!==this.props.activeNotes&&(this._buffer.clearRect(),this._buffer.drawImage(this._background),this._drawHitStates(),this._connectNotes(),this._root.drawImage(this._buffer))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var t=this.props.className;return Object(P.jsx)("canvas",{className:p()(g.a.root,t),ref:this._rootNode})}},{key:"_drawBackground",value:function(){for(var t=this.props.isChromatic,e=0;e<C.length;e++){var n=t?C[e]:C[(k[e].index+6)%12];I(this._background,n,e)}}},{key:"_drawHitStates",value:function(){var t,e=Object(l.a)(this.props.activeNotes);try{for(e.s();!(t=e.n()).done;){var n=t.value;I(this._buffer,"rgba(0,0,0,0.2)",n)}}catch(i){e.e(i)}finally{e.f()}}},{key:"_connectNotes",value:function(){for(var t=this.props.activeNotes,e=this._buffer.width/2,n=2*Math.PI/12,i=this._buffer,o=0;o<t.length;o++)for(var a=n*(t[o]+9),c=Math.cos(a),l=Math.sin(a),r=o;r<t.length;r++){var s=n*(t[r]+9),h=Math.cos(s),d=Math.sin(s);i.beginPath(),i.moveTo(e+c*e,e+l*e),i.lineTo(e+h*e,e+d*e),i.stroke()}}}]),n}(o.a.Component);function I(t,e,n){var i=t.width/2,o=2*Math.PI/12;t.beginPath(),t.fillStyle=e,t.moveTo(i,i);var a=o*(n-3.5),c=Math.cos(a),l=Math.sin(a);t.lineTo(i+c*i,i+l*i);var r=a+o;t.arc(i,i,i,a,r),t.fill()}var M=n(8),D=n.n(M);function S(t){var e=t.className,n=t.notes;return Object(P.jsx)("div",{className:p()(D.a.root,e),children:n.map((function(t,e){var i=2*Math.PI/n.length*(e-6),o=Math.cos(i),a=Math.sin(i);return Object(P.jsx)("button",{className:p()(D.a.button,t.label.length>1&&D.a.small),style:{left:"".concat(35*o+50,"%"),top:"".concat(35*a+50,"%")},onTouchStart:t.play,onTouchEnd:t.pause,children:t.label},t.label)}))})}var A=n(13);function H(t){var e=t.className,n=t.callback,o=Object(i.useRef)(null);function a(t){var e=t.targetTouches;e||n([]);for(var i=o.current.getBoundingClientRect(),a=2*Math.PI,c=[],l=0;l<e.length;l++){var r=e[l],s=r.clientX,h=r.clientY,d=s-i.x-.5*i.width,u=h-i.y-.5*i.height,f=(Math.atan2(-u,d)+a)%a,v=(24-(Math.round(Object(A.round)(f,a/12)/a*12)%12+9))%12;c.push(v)}n(c)}return Object(P.jsx)("div",{ref:o,className:e,onTouchMove:function(t){a(t)},onTouchStart:function(t){a(t)},onTouchEnd:function(t){t.targetTouches,a(t)},onTouchCancel:function(t){a(t)}})}function E(){var t=Object(i.useState)(!0),e=Object(r.a)(t,2),n=e[0],o=e[1],a=Object(i.useState)(!1),c=Object(r.a)(a,2),s=c[0],d=c[1],u=Object(i.useState)([]),f=Object(r.a)(u,2),v=f[0],_=f[1];return Object(P.jsxs)("div",{className:h.a.root,onClick:s?null:function(t){!function(){for(var t=0;t<12;t++)T(t)}(),d(!0)},children:[Object(P.jsxs)("label",{className:h.a.label,children:[n?"CHROMATIC":"CIRCLE OF FIFTHS",Object(P.jsx)("input",{className:h.a.toggle,type:"checkbox",checked:n,onChange:function(t){o(!n)}})]}),Object(P.jsx)("div",{className:h.a.holder,children:Object(P.jsxs)("div",{className:h.a.holdee,children:[Object(P.jsx)(N,{activeNotes:v,className:h.a.touchPad,isChromatic:n}),Object(P.jsx)(S,{className:h.a.touchPad,notes:n?R:k}),Object(P.jsx)(H,{callback:function(t){var e,i=Object(l.a)(R);try{for(i.s();!(e=i.n()).done;){var o=e.value,a=(o.index+3)%12;t.indexOf(o.index)>=0?n?R[a].play():k[a].play():n?R[a].pause():k[a].pause()}}catch(c){i.e(c)}finally{i.f()}_(t)},className:h.a.touchPad})]})})]})}var F=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,23)).then((function(e){var n=e.getCLS,i=e.getFID,o=e.getFCP,a=e.getLCP,c=e.getTTFB;n(t),i(t),o(t),a(t),c(t)}))};c.a.render(Object(P.jsx)(o.a.StrictMode,{children:Object(P.jsx)(E,{})}),document.getElementById("root")),F()},8:function(t,e,n){t.exports={root:"Keypad_root__2ThFc",button:"Keypad_button__1d0eI",small:"Keypad_small__32bQ1"}}},[[22,1,2]]]);
//# sourceMappingURL=main.af25cf05.chunk.js.map