(this["webpackJsonpshepard-circle"]=this["webpackJsonpshepard-circle"]||[]).push([[0],{1:function(e,t,a){e.exports={root:"Menu_root__3QA5H",label:"Menu_label__3hKMT",labelText:"Menu_labelText__2uoMn"}},14:function(e,t,a){e.exports={root:"Label_root__iHLA-",button:"Label_button__opkRi",small:"Label_small__FYd4m"}},18:function(e,t,a){e.exports={root:"TouchPad_root__22wzt"}},19:function(e,t,a){e.exports={root:"Display_root__ig8ld"}},24:function(e,t,a){},26:function(e,t,a){"use strict";a.r(t);var n=a(2),i=a.n(n),c=a(16),o=a.n(c),s=(a(24),a(4)),r=a(3),l=a(8),h=a.n(l),u=a(1),d=a.n(u),v=2e4,f="sine",m="square",b="sawtooth",j="triangle",p="equal",x="just",_="meantone",g="pythagorean",O=a(10),y=function(e){for(var t=[],a=1;a<e;a++)N(e,a)&&t.push(a);return t};function N(e,t){Object(O.a)(Array(e).keys());for(var a=[],n=0;n<e;n++){var i=n*t%e;if(void 0!==a[i])return!1;a[i]=i}return a}var w=function(e){if(12===e)return["A","A#/Bb","B","C","C#/Db","D","D#/Eb","E","F","F#/Gb","G","G#/Ab"];if(e<=26)return Object(O.a)(Array(e).keys()).map((function(e){return String.fromCharCode(97+parseInt(e)).toUpperCase()}));var t=Object(O.a)(Array(e+1).keys());return t.shift(),t},k=a(0);function P(e,t){var a=String(e);return 1===e?a+=" (chromatic)":e===t-1?a+=" (reverse chromatic)":12===t&&7===e&&(a+=" (circle of fifths)"),a}function T(e){var t=e.a4,a=e.temperment,n=e.semitones,i=e.minFreq,c=e.maxFreq,o=e.layoutIncrement,s=e.oscillator,r=e.rootPitch,l=e.setMinFreq,h=e.setMaxFreq,u=e.setA4,O=e.setTemperment,N=e.setOscillator,T=e.setSemitones,C=e.setRootPitch,I=e.setLayoutIncrement;function R(e){var t=e.target.value;O(t)}function M(e){var t=e.target.value;N(t)}var H=w(n);return Object(k.jsxs)("form",{className:d.a.root,children:[Object(k.jsxs)("div",{className:d.a.property,children:[Object(k.jsx)("h2",{className:d.a.title,children:"Oscillator"}),Object(k.jsxs)("label",{className:d.a.label,children:[Object(k.jsx)("input",{className:d.a.input,type:"radio",checked:s===f,value:f,onChange:M}),Object(k.jsx)("div",{className:d.a.labelText,children:f})]}),Object(k.jsxs)("label",{className:d.a.label,children:[Object(k.jsx)("input",{className:d.a.input,type:"radio",checked:s===m,value:m,onChange:M}),Object(k.jsx)("div",{className:d.a.labelText,children:m})]}),Object(k.jsxs)("label",{className:d.a.label,children:[Object(k.jsx)("input",{className:d.a.input,type:"radio",checked:s===b,value:b,onChange:M}),Object(k.jsx)("div",{className:d.a.labelText,children:b})]}),Object(k.jsxs)("label",{className:d.a.label,children:[Object(k.jsx)("input",{className:d.a.input,type:"radio",checked:s===j,value:j,onChange:M}),Object(k.jsx)("div",{className:d.a.labelText,children:j})]})]}),Object(k.jsxs)("div",{className:d.a.property,children:[Object(k.jsx)("h2",{className:d.a.title,children:"Root Pitch"}),H.map((function(e,t){return Object(k.jsxs)("label",{className:d.a.label,children:[Object(k.jsx)("input",{className:d.a.input,type:"radio",value:t,name:"rootPitch",checked:r===t,onChange:function(e){var t=e.target.value;C(parseInt(t))}}),Object(k.jsx)("div",{className:d.a.labelText,children:e})]},e)}))]}),Object(k.jsxs)("div",{className:d.a.property,children:[Object(k.jsx)("h2",{className:d.a.title,children:"Layout Increment"}),y(n).map((function(e){return Object(k.jsxs)("label",{className:d.a.label,children:[Object(k.jsx)("input",{className:d.a.input,type:"radio",value:e,name:"increment",checked:o===e,onChange:function(e){var t=e.target.value;I(parseInt(t))}}),Object(k.jsx)("div",{className:d.a.labelText,children:P(e,n)})]},e)}))]}),Object(k.jsxs)("div",{className:d.a.property,children:[Object(k.jsx)("h2",{className:d.a.title,children:"Frequencies"}),Object(k.jsxs)("label",{className:d.a.label,children:[Object(k.jsx)("input",{className:d.a.input,type:"number",min:20,max:v,value:i,step:"1",onChange:function(e){var t=e.target.value;l(parseInt(t))}}),Object(k.jsx)("div",{className:d.a.labelText,children:"Minimum Frequency"})]}),Object(k.jsxs)("label",{className:d.a.label,children:[Object(k.jsx)("input",{className:d.a.input,type:"number",min:20,max:v,value:c,step:"1",onChange:function(e){var t=e.target.value;h(parseInt(t))}}),Object(k.jsx)("div",{className:d.a.labelText,children:"Max Frequency"})]})]}),Object(k.jsxs)("div",{className:d.a.property,children:[Object(k.jsx)("h2",{className:d.a.title,children:"Semitones"}),Object(k.jsx)("label",{className:d.a.label,children:Object(k.jsx)("input",{className:d.a.input,type:"number",min:1,max:100,value:n,step:"1",onChange:function(e){var t=e.target.value;T(parseInt(t))}})})]}),Object(k.jsxs)("div",{className:d.a.property,children:[Object(k.jsx)("h2",{className:d.a.title,children:"A4"}),Object(k.jsx)("label",{className:d.a.label,children:Object(k.jsx)("input",{className:d.a.input,type:"number",min:20,max:v,value:t,step:"1",onChange:function(e){var t=e.target.value;u(parseInt(t))}})})]}),Object(k.jsxs)("div",{className:d.a.property,children:[Object(k.jsx)("h2",{className:d.a.title,children:"Temperment"}),Object(k.jsxs)("label",{className:d.a.label,children:[Object(k.jsx)("input",{className:d.a.input,type:"radio",disabled:!0,checked:a===p,value:p,onChange:R}),Object(k.jsx)("div",{className:d.a.labelText,children:p})]}),Object(k.jsxs)("label",{className:d.a.label,children:[Object(k.jsx)("input",{className:d.a.input,type:"radio",disabled:!0,checked:a===x,value:x,onChange:R}),Object(k.jsx)("div",{className:d.a.labelText,children:x})]}),Object(k.jsxs)("label",{className:d.a.label,children:[Object(k.jsx)("input",{className:d.a.input,type:"radio",disabled:!0,checked:a===_,value:_,onChange:R}),Object(k.jsx)("div",{className:d.a.labelText,children:_})]}),Object(k.jsxs)("label",{className:d.a.label,children:[Object(k.jsx)("input",{className:d.a.input,type:"radio",disabled:!0,checked:a===g,value:g,onChange:R}),Object(k.jsx)("div",{className:d.a.labelText,children:g})]})]})]})}var C=a(6),I=a(7),R=a(13),M=a(12),H=function(e){Object(R.a)(a,e);var t=Object(M.a)(a);function a(e){var n;Object(C.a)(this,a),(n=t.call(this,e))._onResize=function(){var e=n.props.win;n.setState({innerHeight:e.innerHeight,innerWidth:e.innerWidth})};var i=e.win;return n.state={innerHeight:i.innerHeight,innerWidth:i.innerWidth},i.addEventListener("resize",n._onResize),n}return Object(I.a)(a,[{key:"componentWillUnmount",value:function(){this.props.win.removeEventListener("resize",this._onResize)}},{key:"render",value:function(){var e=this.state,t=e.innerHeight,a=e.innerWidth;return(0,this.props.children)(a,t)}}]),a}(i.a.Component);H.defaultProps={win:"undefined"!==typeof window?window:{addEventListener:function(){},innerHeight:0,innerWidth:0,removeEventListener:function(){}}};var S=a(14),D=a.n(S),A=a(11),q=a.n(A);function F(e){var t=e.rootPitch,a=e.semitones,n=e.layoutIncrement,i=2*Math.PI/a,c=w(a);return Object(k.jsx)("div",{className:D.a.root,children:c.map((function(e,a){var c=i*((a-t)*n)-.5*Math.PI,o=Math.cos(c),s=Math.sin(c);return Object(k.jsx)("div",{className:q()(D.a.button,e.length>1&&D.a.small),style:{left:"".concat(35*o+50,"%"),top:"".concat(35*s+50,"%")},children:e},e)}))})}var W=a(17),L=a(18),B=a.n(L);function z(e){e.className;var t=e.callback,a=e.semitones,i=Object(n.useRef)(null);function c(e){var n=e.targetTouches;n||t([]);for(var c=i.current.getBoundingClientRect(),o=2*Math.PI,s=[],r=0;r<n.length;r++){var l=n[r],h=l.clientX,u=l.clientY,d=h-c.x-.5*c.width,v=u-c.y-.5*c.height,f=(Math.atan2(-v,d)+o)%o,m=Math.round(Object(W.round)(f,o/a)/o*a)%a,b=(2*a-(m+9))%a;s.push(b)}t(s)}return Object(k.jsx)("div",{ref:i,className:B.a.root,onTouchMove:function(e){c(e)},onTouchStart:function(e){c(e)},onTouchEnd:function(e){e.targetTouches,c(e)},onTouchCancel:function(e){c(e)}})}var E=a(19),G=a.n(E);function U(e,t,a,n,i){var c=Math.cos(e),o=Math.sin(e),s=t-c*t-o*-a,r=a-o*t-c*a;i.call(n,c,o,-o,c,s,r)}var Y,J,K,Q,X=function(){function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.createElement("canvas"),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.offsetWidth,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.offsetHeight,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window.devicePixelRatio;Object(C.a)(this,e),this.resize=function(e,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.devicePixelRatio;if(!e||!a){var i=!!t._element.parentNode;e=i?t._element.offsetWidth:t._width,a=i?t._element.offsetHeight:t._height}t._devicePixelRatio=n,t._width=e,t._height=a,t._element.width=e*t._devicePixelRatio,t._element.height=a*t._devicePixelRatio,t._imageDataHandler=null,t._context.scale(t._devicePixelRatio,t._devicePixelRatio)},this.arc=function(e,a,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];t._context.arc(e,a,n,i,c,o)},this.beginPath=function(){t._context.beginPath()},this.bezierCurveTo=function(){var e;(e=t._context).bezierCurveTo.apply(e,arguments)},this.clearRect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.width,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.height;t._context.clearRect(e,a,n,i),t._imageDataHandler=null},this.clip=function(){var e;(e=t._context).clip.apply(e,arguments)},this.closePath=function(){t._context.closePath()},this.drawImage=function(a,n,i,c,o,s,r,l,h){var u=a instanceof e;"number"===typeof s?u?(n*=t._devicePixelRatio,i*=t._devicePixelRatio,c*=t._devicePixelRatio,o*=t._devicePixelRatio,t._context.drawImage(a.element,n,i,c,o,s,r,l,h)):t._context.drawImage(a,n,i,c,o,s,r,l,h):u?(c=c||a.width,o=o||a.height,t._drawImageDest(a.element,n,i,c,o)):t._drawImageDest(a,n,i,c,o),t._imageDataHandler=null},this._drawImageDest=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.width,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.height;t._context.drawImage(e,a,n,i,c)},this.fill=function(){var e;(e=t._context).fill.apply(e,arguments),t._imageDataHandler=null},this.fillRect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.width,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.height;t._context.fillRect(e,a,n,i),t._imageDataHandler=null},this.lineTo=function(){var e;(e=t._context).lineTo.apply(e,arguments)},this.moveTo=function(){var e;(e=t._context).moveTo.apply(e,arguments)},this.quadraticCurveTo=function(){var e;(e=t._context).quadraticCurveTo.apply(e,arguments)},this.rect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.width,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.height;t._context.rect(e,a,n,i)},this.stroke=function(){var e;(e=t._context).stroke.apply(e,arguments),t._imageDataHandler=null},this.resetTransform=function(){t._context.resetTransform(),t._context.scale(t._devicePixelRatio,t._devicePixelRatio)},this.restore=function(){t._context.restore()},this.rotate=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5*t.width,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5*t.height;e&&U(e,a,n,t._context,t._context.transform)},this.save=function(){t._context.save()},this.setRotate=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5*t.width,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5*t.height;U(e,a,n,t._context,t.setTransform)},this.setTransform=function(e,a,n,i,c,o){e*=t._devicePixelRatio,a*=t._devicePixelRatio,n*=t._devicePixelRatio,i*=t._devicePixelRatio,c*=t._devicePixelRatio,o*=t._devicePixelRatio,t._context.setTransform(e,a,n,i,c,o)},this.setTranslate=function(e,a){t.setTransform(1,0,0,1,e,a)},this.translate=function(e,a){t._context.translate(e,a)},this.createImageData=function(e,a){return t._context.createImageData(e,a)},this._element=a,this._context=this._element.getContext("2d"),this.resize(n,i,c)}return Object(I.a)(e,[{key:"element",get:function(){return this._element}},{key:"height",get:function(){return this._height}},{key:"imageDataHandler",get:function(){if(!this._imageDataHandler)this._width,this._devicePixelRatio,this._height,this._devicePixelRatio;return this._imageDataHandler}},{key:"width",get:function(){return this._width}},{key:"fillStyle",set:function(e){this._context.fillStyle=e}},{key:"globalCompositeOperation",set:function(e){this._context.globalCompositeOperation=e}},{key:"globalAlpha",set:function(e){this._context.globalAlpha=e}},{key:"lineWidth",set:function(e){this._context.lineWidth=e}},{key:"strokeStyle",set:function(e){this._context.strokeStyle=e}}],[{key:"quadraticThrough",value:function(e){for(var t,a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Path2D,i=e.length,c=0;c<i-1;c++)if(t=a||e[0],a=e[c+1],0===c)n.moveTo(t.x,t.y);else if(c<i-2){var o=(t.x+a.x)/2,s=(t.y+a.y)/2;n.quadraticCurveTo(t.x,t.y,o,s)}else n.quadraticCurveTo(t.x,t.y,a.x,a.y);return n}}]),e}(),Z=["#f00","#f80","#ff0","#8f0","#0f0","#0f8","#0ff","#08f","#00f","#80f","#f0f","#f08"],V=function(e){Object(R.a)(a,e);var t=Object(M.a)(a);function a(e){var n;return Object(C.a)(this,a),(n=t.call(this,e)).state={},n._rootNode=i.a.createRef(),n}return Object(I.a)(a,[{key:"componentDidMount",value:function(){var e=this._rootNode.current,t=e.offsetWidth,a=e.offsetHeight;this._root=new X(e),this._root.globalCompositeOperation="copy",this._buffer=new X(void 0,t,a),this._background=new X(void 0,t,a),this._drawBackground(),this._root.drawImage(this._background)}},{key:"componentDidUpdate",value:function(e,t){e.isChromatic!==this.props.isChromatic&&(this._drawBackground(),this._root.drawImage(this._background)),e.activeNotes!==this.props.activeNotes&&(this._buffer.clearRect(),this._buffer.drawImage(this._background),this._drawHitStates(),this._connectNotes(),this._root.drawImage(this._buffer))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props.className;return Object(k.jsx)("canvas",{className:q()(G.a.root,e),ref:this._rootNode})}},{key:"_convertIndex",value:function(e){var t=this.props,a=t.rootPitch,n=t.semitones;return(e-a+n)*t.layoutIncrement%n}},{key:"_drawBackground",value:function(){for(var e=this.props,t=(e.isChromatic,e.rootPitch),a=e.semitones,n=0;n<Z.length;n++){this._convertIndex(n);var i=Z[this._convertIndex((n+t)%a)];$(this._background,i,n)}}},{key:"_drawHitStates",value:function(){var e,t=this.props,a=(t.activeNotes,t.layoutIncrement,t.semitones,t.rootPitch,Object(s.a)(this.props.activeNotes));try{for(a.s();!(e=a.n()).done;){var n=e.value;$(this._buffer,"rgba(0,0,0,0.2)",this._convertIndex(n))}}catch(i){a.e(i)}finally{a.f()}}},{key:"_connectNotes",value:function(){for(var e=this.props.activeNotes,t=this._buffer.width/2,a=2*Math.PI/12,n=this._buffer,i=0;i<e.length;i++)for(var c=a*(e[i]+9),o=Math.cos(c),s=Math.sin(c),r=i;r<e.length;r++){var l=a*(e[r]+9),h=Math.cos(l),u=Math.sin(l);n.beginPath(),n.moveTo(t+o*t,t+s*t),n.lineTo(t+h*t,t+u*t),n.stroke()}}}]),a}(i.a.Component);function $(e,t,a){var n=e.width/2,i=2*Math.PI/12;e.beginPath(),e.fillStyle=t,e.moveTo(n,n);var c=i*(a-3.5),o=Math.cos(c),s=Math.sin(c);e.lineTo(n+o*n,n+s*n);var r=c+i;e.arc(n,n,n,c,r),e.fill()}function ee(e,t,a,n){K&&K.close(),K=new(window.AudioContext||window.webkitAudioContext),(Q=K.createGain()).connect(K.destination),Q.gain.value=.1,J=[],Y=[];for(var i=0;i<e;i++)Y[i]=te(i,t,a,n,e)}function te(e,t,a,n,i){for(var c=t*Math.pow(Math.pow(2,1/i),e);c>=a;)c/=2;for(var o=[],s=c*=2;s<=n;s*=2)o.push(s);return o}function ae(e,t,a){t&&!J[e]?function(e,t){var a=[];J[e]=a;var n,i=Object(s.a)(Y[e]);try{for(i.s();!(n=i.n()).done;){var c=n.value,o=K.createOscillator();o.frequency.value=c,o.type=t,o.connect(Q),o.start(),a.push(o)}}catch(r){i.e(r)}finally{i.f()}}(e,a):!t&&J[e]&&function(e){var t,a=Object(s.a)(J[e]);try{for(a.s();!(t=a.n()).done;)t.value.stop()}catch(n){a.e(n)}finally{a.f()}J[e]=null}(e)}function ne(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),a=t[0],i=t[1],c=Object(n.useState)(440),o=Object(r.a)(c,2),l=o[0],u=o[1],d=Object(n.useState)(p),m=Object(r.a)(d,2),b=m[0],j=m[1],x=Object(n.useState)(f),_=Object(r.a)(x,2),g=_[0],O=_[1],N=Object(n.useState)(3),w=Object(r.a)(N,2),P=w[0],C=w[1],I=Object(n.useState)(20),R=Object(r.a)(I,2),M=R[0],S=R[1],D=Object(n.useState)(v),A=Object(r.a)(D,2),q=A[0],W=A[1];var L=Object(n.useState)(12),B=Object(r.a)(L,2),E=B[0],G=B[1];var U=Object(n.useState)(1),Y=Object(r.a)(U,2),J=Y[0],K=Y[1];var Q=Object(n.useState)(!1),X=Object(r.a)(Q,2),Z=X[0],$=X[1];var te=Object(n.useState)([]),ne=Object(r.a)(te,2),ie=ne[0],ce=ne[1];function oe(e){var t,a=[],n=Object(s.a)(e);try{for(n.s();!(t=n.n()).done;){var i=(t.value*J+P)%E;a.push(i)}}catch(o){n.e(o)}finally{n.f()}for(var c=0;c<E;c++)a.indexOf(c)>=0?ae(c,!0,g):ae(c,!1,g);ce(a)}return Object(k.jsxs)("div",{className:h.a.root,onClick:Z?null:function(){ee(E,l,M,q),$(!0)},children:[Object(k.jsx)("div",{className:h.a.contentHolder}),Object(k.jsx)(H,{children:function(e,t){var a=Math.min(e,t);return Object(k.jsxs)("div",{className:h.a.wheelHolder,style:{width:"".concat(a,"px"),height:"".concat(a,"px")},children:[Object(k.jsx)(V,{semitones:E,layoutIncrement:J,activeNotes:ie,rootPitch:P}),Object(k.jsx)(F,{layoutIncrement:J,rootPitch:P,semitones:E}),Z&&Object(k.jsx)(z,{callback:oe,semitones:E})]})}}),a&&Object(k.jsx)("div",{className:h.a.menuHolder,children:Object(k.jsx)(T,{minFreq:M,maxFreq:q,setMinFreq:function(e){e>=q&&W(e+1),S(e)},setMaxFreq:function(e){e<=M&&S(e-1),W(e)},a4:l,setA4:u,temperment:b,setTemperment:j,oscillator:g,setOscillator:O,semitones:E,setSemitones:function(e){y(e).indexOf(J)>=0&&K(1),b!==p&&j(p),G(e)},rootPitch:P,setRootPitch:C,layoutIncrement:J,setLayoutIncrement:function(e){K(e)}})}),Object(k.jsx)("button",{className:h.a.menuButton,onClick:function(){a&&ee(E,l,M,q),i(!a)},children:a?"close menu":"open menu"})]})}var ie=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,27)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),n(e),i(e),c(e),o(e)}))};o.a.render(Object(k.jsx)(i.a.StrictMode,{children:Object(k.jsx)(ne,{})}),document.getElementById("root")),ie()},8:function(e,t,a){e.exports={root:"App_root__nWMuC",menuHolder:"App_menuHolder__243kY",menuButton:"App_menuButton__3IBp4",contentHolder:"App_contentHolder__3Zpi7",wheelHolder:"App_wheelHolder__1I76D"}}},[[26,1,2]]]);
//# sourceMappingURL=main.051154df.chunk.js.map