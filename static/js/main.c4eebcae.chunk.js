(this["webpackJsonpshepard-circle"]=this["webpackJsonpshepard-circle"]||[]).push([[0],{12:function(t,e,n){},2:function(t,e,n){t.exports={root:"App_root__nWMuC",holder:"App_holder__33-ly",holdee:"App_holdee__1nrU0",touchPad:"App_touchPad__LkGTv",label:"App_label__1QbUI",toggle:"App_toggle__IuLcT"}},20:function(t,e,n){},22:function(t,e,n){"use strict";n.r(e);var i=n(1),a=n.n(i),o=n(11),c=n.n(o),r=(n(20),n(4)),l=n(9),s=n(2),h=n.n(s),u=n(5),d=n(6),f=n(15),v=n(14),_=n(12),g=n.n(_),x=n(3),b=n.n(x);function p(t,e,n,i,a){var o=Math.cos(t),c=Math.sin(t),r=e-o*e-c*-n,l=n-c*e-o*n;a.call(i,o,c,-c,o,r,l)}var m=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.createElement("canvas"),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.offsetWidth,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.offsetHeight,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window.devicePixelRatio;Object(u.a)(this,t),this.resize=function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.devicePixelRatio;if(!t||!n){var a=!!e._element.parentNode;t=a?e._element.offsetWidth:e._width,n=a?e._element.offsetHeight:e._height}e._devicePixelRatio=i,e._width=t,e._height=n,e._element.width=t*e._devicePixelRatio,e._element.height=n*e._devicePixelRatio,e._imageDataHandler=null,e._context.scale(e._devicePixelRatio,e._devicePixelRatio)},this.arc=function(t,n,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,c=arguments.length>5&&void 0!==arguments[5]&&arguments[5];e._context.arc(t,n,i,a,o,c)},this.beginPath=function(){e._context.beginPath()},this.bezierCurveTo=function(){var t;(t=e._context).bezierCurveTo.apply(t,arguments)},this.clearRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.width,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.height;e._context.clearRect(t,n,i,a),e._imageDataHandler=null},this.clip=function(){var t;(t=e._context).clip.apply(t,arguments)},this.closePath=function(){e._context.closePath()},this.drawImage=function(n,i,a,o,c,r,l,s,h){var u=n instanceof t;"number"===typeof r?u?(i*=e._devicePixelRatio,a*=e._devicePixelRatio,o*=e._devicePixelRatio,c*=e._devicePixelRatio,e._context.drawImage(n.element,i,a,o,c,r,l,s,h)):e._context.drawImage(n,i,a,o,c,r,l,s,h):u?(o=o||n.width,c=c||n.height,e._drawImageDest(n.element,i,a,o,c)):e._drawImageDest(n,i,a,o,c),e._imageDataHandler=null},this._drawImageDest=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.width,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t.height;e._context.drawImage(t,n,i,a,o)},this.fill=function(){var t;(t=e._context).fill.apply(t,arguments),e._imageDataHandler=null},this.fillRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.width,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.height;e._context.fillRect(t,n,i,a),e._imageDataHandler=null},this.lineTo=function(){var t;(t=e._context).lineTo.apply(t,arguments)},this.moveTo=function(){var t;(t=e._context).moveTo.apply(t,arguments)},this.quadraticCurveTo=function(){var t;(t=e._context).quadraticCurveTo.apply(t,arguments)},this.rect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.width,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.height;e._context.rect(t,n,i,a)},this.stroke=function(){var t;(t=e._context).stroke.apply(t,arguments),e._imageDataHandler=null},this.resetTransform=function(){e._context.resetTransform(),e._context.scale(e._devicePixelRatio,e._devicePixelRatio)},this.restore=function(){e._context.restore()},this.rotate=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5*e.width,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5*e.height;t&&p(t,n,i,e._context,e._context.transform)},this.save=function(){e._context.save()},this.setRotate=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5*e.width,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5*e.height;p(t,n,i,e._context,e.setTransform)},this.setTransform=function(t,n,i,a,o,c){t*=e._devicePixelRatio,n*=e._devicePixelRatio,i*=e._devicePixelRatio,a*=e._devicePixelRatio,o*=e._devicePixelRatio,c*=e._devicePixelRatio,e._context.setTransform(t,n,i,a,o,c)},this.setTranslate=function(t,n){e.setTransform(1,0,0,1,t,n)},this.translate=function(t,n){e._context.translate(t,n)},this.createImageData=function(t,n){return e._context.createImageData(t,n)},this._element=n,this._context=this._element.getContext("2d"),this.resize(i,a,o)}return Object(d.a)(t,[{key:"element",get:function(){return this._element}},{key:"height",get:function(){return this._height}},{key:"imageDataHandler",get:function(){if(!this._imageDataHandler)this._width,this._devicePixelRatio,this._height,this._devicePixelRatio;return this._imageDataHandler}},{key:"width",get:function(){return this._width}},{key:"fillStyle",set:function(t){this._context.fillStyle=t}},{key:"globalCompositeOperation",set:function(t){this._context.globalCompositeOperation=t}},{key:"globalAlpha",set:function(t){this._context.globalAlpha=t}},{key:"lineWidth",set:function(t){this._context.lineWidth=t}},{key:"strokeStyle",set:function(t){this._context.strokeStyle=t}}],[{key:"quadraticThrough",value:function(t){for(var e,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Path2D,a=t.length,o=0;o<a-1;o++)if(e=n||t[0],n=t[o+1],0===o)i.moveTo(e.x,e.y);else if(o<a-2){var c=(e.x+n.x)/2,r=(e.y+n.y)/2;i.quadraticCurveTo(e.x,e.y,c,r)}else i.quadraticCurveTo(e.x,e.y,n.x,n.y);return i}}]),t}(),y=n(0),w=["#f00","#f80","#ff0","#8f0","#0f0","#0f8","#0ff","#08f","#00f","#80f","#f0f","#f08"],j=function(t){Object(f.a)(n,t);var e=Object(v.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).state={},i._rootNode=a.a.createRef(),i}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var t=this._rootNode.current,e=t.offsetWidth,n=t.offsetHeight;this._root=new m(t),this._root.globalCompositeOperation="copy",this._buffer=new m(void 0,e,n),this._background=new m(void 0,e,n),this._drawBackground(),this._root.drawImage(this._background)}},{key:"componentDidUpdate",value:function(t,e){t.activeNotes!==this.props.activeNotes&&(this._buffer.clearRect(),this._buffer.drawImage(this._background),this._drawHitStates(),this._connectNotes(),this._root.drawImage(this._buffer))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var t=this.props.className;return Object(y.jsx)("canvas",{className:b()(g.a.root,t),ref:this._rootNode})}},{key:"_drawBackground",value:function(){for(var t=0;t<w.length;t++)P(this._background,w[t],t)}},{key:"_drawHitStates",value:function(){var t,e=Object(r.a)(this.props.activeNotes);try{for(e.s();!(t=e.n()).done;){var n=t.value;P(this._buffer,"rgba(0,0,0,0.2)",n)}}catch(i){e.e(i)}finally{e.f()}}},{key:"_connectNotes",value:function(){for(var t=this.props.activeNotes,e=this._buffer.width/2,n=2*Math.PI/12,i=this._buffer,a=0;a<t.length;a++)for(var o=n*(t[a]+9),c=Math.cos(o),r=Math.sin(o),l=a;l<t.length;l++){var s=n*(t[l]+9),h=Math.cos(s),u=Math.sin(s);i.beginPath(),i.moveTo(e+c*e,e+r*e),i.lineTo(e+h*e,e+u*e),i.stroke()}}}]),n}(a.a.Component);function P(t,e,n){var i=t.width/2,a=2*Math.PI/12;t.beginPath(),t.fillStyle=e,t.moveTo(i,i);var o=a*(n-3.5),c=Math.cos(o),r=Math.sin(o);t.lineTo(i+c*i,i+r*i);var l=o+a;t.arc(i,i,i,o,l),t.fill()}var k=n(8),T=n.n(k);function O(t){var e=t.className,n=t.notes;return Object(y.jsx)("div",{className:b()(T.a.root,e),children:n.map((function(t,e){var i=2*Math.PI/n.length*(e-6),a=Math.cos(i),o=Math.sin(i);return Object(y.jsx)("button",{className:b()(T.a.button,t.label.length>1&&T.a.small),style:{left:"".concat(35*a+50,"%"),top:"".concat(35*o+50,"%")},onTouchStart:t.play,onTouchEnd:t.pause,children:t.label},t.label)}))})}var R=n(13);function C(t){var e=t.className,n=t.callback,a=Object(i.useRef)(null);function o(t){var e=t.targetTouches;e||n([]);for(var i=a.current.getBoundingClientRect(),o=2*Math.PI,c=[],r=0;r<e.length;r++){var l=e[r],s=l.clientX,h=l.clientY,u=s-i.x-.5*i.width,d=h-i.y-.5*i.height,f=(Math.atan2(-d,u)+o)%o,v=(24-(Math.round(Object(R.round)(f,o/12)/o*12)%12+9))%12;c.push(v)}n(c)}return Object(y.jsx)("div",{ref:a,className:e,onTouchMove:function(t){o(t)},onTouchStart:function(t){o(t)},onTouchEnd:function(t){t.targetTouches,o(t)},onTouchCancel:function(t){o(t)}})}var N=[],I=[];function M(t){var e=440/Math.pow(2,4),n=new(window.AudioContext||window.webkitAudioContext),i=n.createGain(),a=Math.pow(2,1/12),o=[];i.connect(n.destination),i.gain.value=1/12;for(var c=e;c<=2e4;c*=2){var r=c*Math.pow(a,t);if(!(r<20)){if(r>2e4)break;var l=n.createOscillator();l.frequency.value=r,l.connect(i),l.start(0),o[c]=l}}n.suspend(),I[t]=n}function D(t,e){var n;e&&!N[t]?(N[n=t]=!0,I[n]?I[n].resume():M(n)):!e&&N[t]&&function(t){I[t].suspend(),N[t]=!1}(t)}for(var H=["A","A#/Bb","B","C","C#/Db","D","D#/Eb","E","F","F#/Gb","G","G#/Ab"],S=H.map((function(t,e){return{label:t,index:e,play:D.bind(null,e,!0),pause:D.bind(null,e,!1)}})),A=[];A.length<H.length;)A.push(S[(7*A.length+6)%H.length]);function F(){var t=Object(i.useState)(!0),e=Object(l.a)(t,2),n=e[0],a=e[1],o=Object(i.useState)(!1),c=Object(l.a)(o,2),s=c[0],u=c[1],d=Object(i.useState)([]),f=Object(l.a)(d,2),v=f[0],_=f[1];return Object(y.jsxs)("div",{className:h.a.root,onClick:s?null:function(t){!function(){for(var t=0;t<12;t++)M(t)}(),u(!0)},children:[Object(y.jsxs)("label",{className:h.a.label,children:[n?"CHROMATIC":"CIRCLE OF FIFTHS",Object(y.jsx)("input",{className:h.a.toggle,type:"checkbox",checked:n,onChange:function(t){a(!n)}})]}),Object(y.jsx)("div",{className:h.a.holder,children:Object(y.jsxs)("div",{className:h.a.holdee,children:[Object(y.jsx)(j,{activeNotes:v,className:h.a.touchPad}),Object(y.jsx)(O,{className:h.a.touchPad,notes:n?S:A}),Object(y.jsx)(C,{callback:function(t){var e,n=Object(r.a)(S);try{for(n.s();!(e=n.n()).done;){var i=e.value;t.indexOf(i.index)>=0?i.play():i.pause()}}catch(a){n.e(a)}finally{n.f()}_(t)},className:h.a.touchPad})]})})]})}var B=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,23)).then((function(e){var n=e.getCLS,i=e.getFID,a=e.getFCP,o=e.getLCP,c=e.getTTFB;n(t),i(t),a(t),o(t),c(t)}))};c.a.render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(F,{})}),document.getElementById("root")),B()},8:function(t,e,n){t.exports={root:"Keypad_root__2ThFc",button:"Keypad_button__1d0eI",small:"Keypad_small__32bQ1"}}},[[22,1,2]]]);
//# sourceMappingURL=main.c4eebcae.chunk.js.map